<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
  <title>parser (RSpec::Core::Parser)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" href="../../../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre><span class="ruby-comment cmt"># File lib/rspec/core/option_parser.rb, line 24</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parser</span>(<span class="ruby-identifier">options</span>)
      <span class="ruby-constant">OptionParser</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">parser</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">banner</span> = <span class="ruby-value str">&quot;Usage: rspec [options] [files or directories]&quot;</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-b'</span>, <span class="ruby-value str">'--backtrace'</span>, <span class="ruby-value str">'Enable full backtrace'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:full_backtrace</span>] = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-c'</span>, <span class="ruby-value str">'--[no-]color'</span>, <span class="ruby-value str">'--[no-]colour'</span>, <span class="ruby-value str">'Enable color in the output'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:color_enabled</span>] = <span class="ruby-identifier">o</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-d'</span>, <span class="ruby-value str">'--debug'</span>, <span class="ruby-value str">'Enable debugging'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:debug</span>] = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-e'</span>, <span class="ruby-value str">'--example PATTERN'</span>, <span class="ruby-value str">&quot;Run examples whose full descriptions match this pattern&quot;</span>,
                <span class="ruby-value str">&quot;(PATTERN is compiled into a Ruby regular expression)&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:full_description</span>] = <span class="ruby-node">/#{o}/</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-f'</span>, <span class="ruby-value str">'--format FORMATTER'</span>, <span class="ruby-value str">'Choose a formatter'</span>,
                <span class="ruby-value str">'  [p]rogress (default - dots)'</span>,
                <span class="ruby-value str">'  [d]ocumentation (group and example names)'</span>,
                <span class="ruby-value str">'  [h]tml'</span>,
                <span class="ruby-value str">'  [t]extmate'</span>,
                <span class="ruby-value str">'  custom formatter class name'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:formatter</span>] = <span class="ruby-identifier">o</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-o'</span>, <span class="ruby-value str">'--out FILE'</span>, <span class="ruby-value str">'output to a file instead of STDOUT'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:output_stream</span>] = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">o</span>,<span class="ruby-value str">'w'</span>)
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on_tail</span>(<span class="ruby-value str">'-h'</span>, <span class="ruby-value str">'--help'</span>, <span class="ruby-value str">&quot;You're looking at it.&quot;</span>) <span class="ruby-keyword kw">do</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-identifier">parser</span>
          <span class="ruby-identifier">exit</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-I DIRECTORY'</span>, <span class="ruby-value str">'specify $LOAD_PATH directory (may be used more than once)'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:libs</span>] <span class="ruby-operator">||=</span> []
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:libs</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">dir</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-l'</span>, <span class="ruby-value str">'--line_number LINE'</span>, <span class="ruby-value str">'Specify the line number of a single example to run'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:line_number</span>] = <span class="ruby-identifier">o</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-p'</span>, <span class="ruby-value str">'--profile'</span>, <span class="ruby-value str">'Enable profiling of examples with output of the top 10 slowest examples'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:profile_examples</span>] = <span class="ruby-identifier">o</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-r'</span>, <span class="ruby-value str">'--require PATH'</span>, <span class="ruby-value str">'Require a file'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:requires</span>] <span class="ruby-operator">||=</span> []
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:requires</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">path</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-v'</span>, <span class="ruby-value str">'--version'</span>, <span class="ruby-value str">'Show version'</span>) <span class="ruby-keyword kw">do</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-constant">RSpec</span><span class="ruby-operator">::</span><span class="ruby-constant">Core</span><span class="ruby-operator">::</span><span class="ruby-constant">Version</span><span class="ruby-operator">::</span><span class="ruby-constant">STRING</span>
          <span class="ruby-identifier">exit</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'-X'</span>, <span class="ruby-value str">'--drb'</span>, <span class="ruby-value str">'Run examples via DRb'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:drb</span>] = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'--configure COMMAND'</span>, <span class="ruby-value str">'Generate configuration files'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cmd</span><span class="ruby-operator">|</span>
          <span class="ruby-constant">CommandLineConfiguration</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">cmd</span>).<span class="ruby-identifier">run</span>
          <span class="ruby-identifier">exit</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'--drb-port [PORT]'</span>, <span class="ruby-value str">'Port to connect to on the DRb server'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:drb_port</span>] = <span class="ruby-identifier">o</span>.<span class="ruby-identifier">to_i</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">'--autotest'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:autotest</span>] = <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
</body>
</html>